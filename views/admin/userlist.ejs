




<%- include('../layout/adminheader.ejs') -%>

    </head>
   <body>
   

 <!-- Layout wrapper -->
 <div class="layout-wrapper layout-content-navbar  ">
    <div class="layout-container">
  
      
      
  
  
  
 <!-- Menu -->
<%- include('../partials/adminsidebar.ejs') -%>

<!-- / Menu -->
  
      
  
      <!-- Layout container -->
      <div class="layout-page">
        
        
  
  
  
  <!-- Navbar -->

<%- include('../partials/adminnavbar.ejs') -%>

<!-- / Navbar -->
  
        
  
        <!-- Content wrapper -->
        <div class="content-wrapper">
  
          <!-- Content -->
          
            <div class="container-xxl flex-grow-1 container-p-y">
              
              
  <!-- Product List Widget -->
  
  


  <!-- Product List Table -->
  <div class="card">
    <div class="card-header">
      <h5 class="mb-0">User List</h5>
      
      <% if (messages.success) { %>
        <div class="alert alert-success"><%= messages.success %></div>
    <% } %>
    <% if (messages.error) { %>
        <div class="alert alert-danger"><%= messages.error %></div>
    <% } %>

      <div class="d-flex justify-content-between align-items-center row pt-4 gap-4 gap-md-0">
        <div class="col-md-4 product_status"></div>
        <div class="col-md-4 product_category"></div>
        <div class="col-md-4 product_stock"></div>
      </div>
    </div>
    <div class="card-datatable table-responsive">
      <table class="datatables-products table">
        <thead>
          <tr>
            <th>No</th>
            <th>Name</th>
            <th>Email</th>
            <th>Status</th>
            <th>Action</th>
            
          </tr>
        </thead>
        <tbody>
            <% if (users.length > 0) { %>
                <% users.forEach((user, index) => { %>
                    <tr>
                        <td><%= index + 1 %></td> <!-- Adding 1 to make index 1-based -->
                        <td><%= user.name %></td>
                        <td><%= user.email %></td>
                        <td><%= user.isActive ? 'UnBlock' : 'Block' %></td> <!-- Show Listed or Unlisted -->
                        <td>
                           
                            <!-- Toggle Unlist/List button based on user's isActive status -->
                            <form action="/admin/toggleusers/<%= user._id %>" method="POST" style="display:inline;">
                                <button type="submit" class="btn <%= user.isActive ? 'btn-danger' : 'btn-success' %>">
                                    <%= user.isActive ? 'Block' : 'UnBlock' %>
                                </button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            <% } else { %>
                <tr>
                    <td colspan="10">No users found</td>
                </tr>
            <% } %>
        </tbody>
      </table>
    </div>
  </div>








  
  
            </div>
            <!-- / Content -->
  
            
            
  
  <!-- Footer -->
  <footer class="content-footer footer bg-footer-theme">
    <div class="container-xxl">
      <div class="footer-container d-flex align-items-center justify-content-between py-4 flex-md-row flex-column">
        <div class="text-body mb-2 mb-md-0">
          Â© <script>
          document.write(new Date().getFullYear())
  
          </script>, made with <span class="text-danger"><i class="tf-icons ri-heart-fill"></i></span> by <a href="https://themeselection.com/" target="_blank" class="footer-link">ThemeSelection</a>
        </div>
        <div class="d-none d-lg-inline-block">
          
          <a href="https://themeselection.com/license/" class="footer-link me-4" target="_blank">License</a>
          <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More Themes</a>
          
          <a href="https://demos.themeselection.com/materio-bootstrap-html-admin-template/documentation/" target="_blank" class="footer-link me-4">Documentation</a>
          
          
          <a href="https://themeselection.com/support/" target="_blank" class="footer-link d-none d-sm-inline-block">Support</a>
          
        </div>
      </div>
    </div>
  </footer>
  <!-- / Footer -->
  
            
            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>
  
      
      
      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
      
      
      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
      
    </div>

         
   </body>